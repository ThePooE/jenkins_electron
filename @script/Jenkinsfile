#!groovy
import hudson.model.*
import groovy.json.JsonSlurper
import java.nio.file.Paths
def parameters = build?.actions.find{ it instanceof ParametersAction }?.parameters
parameters.each {
   println "parameter ${it.name}:"
   println it.dump()
}
node {
    def jsonSlourper = new JsonSlurper()
    stage ('Download') {
        checkout scm
        echo 'Yay!'
    }
    stage ('Setup') {
        bat 'npm run package-properties'
        def packageProperties
        Paths.get('package.json').withReader { reader ->
            packageProperties = slurper.parse(reader)
        }
    }
}